<div ng-controller="dimMinMaxCtrl as normal" style="min-width:900px">
  <a ui-sref='inventory'><i class='fa fa-arrow-circle-left' style='padding-right:5px;'></i>Back to DIM</a>
  <h1>Normalization Calculator</h1>

  <p>This page will help you determine what your best gear is.</p>
  <p>As items are infused in-game to higher light levels, their stats also go up.<br/>
    All gear and their stats are normalized to light level 320.<br/>
    The stats displayed are the BASE stats for the item. The perks that increase intellect/dis/str are NOT included.</p>
  <div ng-show="false"><p>The best gear is defined by having one of the following:</p>
  <ul>
    <li>highest intellect</li>
    <li>highest discipline</li>
    <li>highest strength</li>
    <li>highest intellect + discipline</li>
    <li>highest intellect + strength</li>
    <li>highest discipline + strength</li>
  </ul></div>

  <p>View class: <select ng-model='normal.active' ng-change='normal.normalizeBuckets()'>
    <option value='titan'>Titan</option>
    <option value='hunter'>Hunter</option>
    <option value='warlock'>Warlock</option>
  </select></p>
<!--  <p>Normalize stats to light level: <input type='number' ng-model='normal.normalize' placeholder='320' ng-change='normal.normalizeBuckets()' /></p>-->

  <div ng-repeat="(bucket, buckets) in normal.ranked">
    <h3>{{bucket}} (+{{normal.getBonus(normal.normalize, bucket)}} bonus excluded)</h3>
    <div ng-repeat="(type, items) in buckets">
      <h4 ng-bind="type"></h4>
      <span style='display: inline-block; margin-right: 20px'>
        <div><small>Intellect</small></div>
        <div><small>Discipline</small></div>
        <div><small>Strength</small></div>
      </span>
      <span ng-repeat="item in items">
        <div style='display: inline-block'>
          <div style='display: inline-block'>
            <div ng-repeat="stat in item.stats track by $index">
              <small>{{stat.base}}/{{item.normalStats[$index].base}}</small>
            </div>
          </div>
          <div dim-store-item item-data="item"></div>
        </div>
      </span>
    </div>
  </div>
</div>
