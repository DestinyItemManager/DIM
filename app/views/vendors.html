<div class="vendorDialog" ng-controller="dimVendorCtrl as vm">
  <h1 class="orange">Vendors</h1>
  <div class="ngdialog-inner-content">
    <div class="selectionPanel">
      <p>
        <label ng-class="{selected: vm.active === 'Warlock'}" class='vendor-button'>
          <input type='radio' ng-model='vm.active' value='Warlock'>Warlock
        </label>
        <label ng-class="{selected: vm.active === 'Titan'}" class='vendor-button'>
          <input type='radio' ng-model='vm.active' value='Titan'>Titan
        </label>
        <label ng-class="{selected: vm.active === 'Hunter'}" class='vendor-button'>
          <input type='radio' ng-model='vm.active' value='Hunter'>Hunter
        </label>
      </p>
      <p>
        <select ng-model='vm.activeVendor' ng-options="idx as obj.vendorName for (idx, obj) in vm.vendors"></select>
      </p>
    </div>
    <div class="vendorContainer">
    <div class="vendorBlock">
      <div class="vendorHeader">
        <h2 ng-bind="vm.vendors[vm.activeVendor].vendorName"></h2>
        <img class="vendorIcon" ng-src="{{vm.vendors[vm.activeVendor].vendorIcon}}" />
      </div>
      <div class="vendorRow">
        <div ng-repeat="(itemType, saleItems) in vm.vendors[vm.activeVendor].items[vm.active]">
          <h3>{{itemType}}</h3>
          <div class="itemType">
            <div ng-if="saleItems.length > 0" class="vendorItem" ng-repeat="saleItem in saleItems">
              <dim-simple-item class="itemQuality" id="vendor-{{::saleItem.hash}}" item-data="saleItem" ng-click="vm.itemClicked(saleItem, $event)"></dim-simple-item>
              <div class="cost" ng-class="{notenough: (vm.totalCoins[saleItem.cost.currency.itemHash] < saleItem.cost.cost)}">
                {{::saleItem.cost.cost}}/{{vm.totalCoins[saleItem.cost.currency.itemHash]}}
                <span class="currency"><img dim-bungie-image-fallback="::saleItem.cost.currency.icon" title="{{::saleItem.cost.currency.name}}"></span>
              </div>
            </div>
          </div>
          <div ng-if="saleItems.length === 0" style="height:72px;margin-left:0;" class="unequipped sub-bucket">
            <dim-store-item ng-repeat="item in vm.items | equipped:false | sortItems:vm.itemSort track by item.index" store-data="vm.store" item-data="item"></dim-store-item>
          </div>
        </div>
      </div>
    </div>
    </div>
  </div>
</div>
